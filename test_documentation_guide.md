# 문서 작성 가이드

## 목적

AI agent가 프로젝트별 지시서(개발, 디자인, 기획, 테스트 등)를 작성할 때 참고하는 가이드입니다.

## 문서 작성 원칙

### 1. 범용성
- 프로젝트 특정 내용 제거
- 추상화된 개념 사용
- 예시는 일반화

### 2. 토큰 최적화
- 핵심만 포함
- 중복 제거
- 간결한 표현
- 불필요한 설명 생략

### 3. AI Agent 대상
- 명확한 구조
- 체크리스트 제공
- 실행 가능한 지시
- 모호성 제거

### 4. 심도
- 테스트 범위 명확
- 검증 포인트 구체화
- 주의사항 포함
- 체크리스트 제공

## 지시서 유형별 구조

### 1. 테스트 지시서

#### 오케스트레이션 문서 (test.md)

```
# 테스트 오케스트레이션 문서

## 테스트 유형별 참고 문서
- 매핑 테이블 (테스트 유형 → 참고 문서)

## 테스트 원칙
- 파일 관리
- 결과 보고
- 환경 설정

## 테스트 절차
- 사전 확인
- 테스트 실행
- 결과 정리

## 기본 테스트 케이스
- 정상/에러/기능

## 예외 사항
```

### 특정 테스트 가이드 (test_*.md)

```
# [테스트 유형] 테스트 가이드

## 테스트 범위
- 구조 검증
- 기능 검증
- 에러 처리
- 로깅

## 테스트 케이스
- 정상
- 에러

## 주의사항
- 비동기 처리
- 상태 격리
- 외부 의존성

## 체크리스트
```

## 섹션별 작성 가이드

### 1. 테스트 범위
- 구조: 노드/엣지/상태 (워크플로우), 엔드포인트/라우팅 (API)
- 기능: 각 컴포넌트별 입력/출력
- 에러: 노드/컴포넌트 레벨, 전체 레벨
- 로깅: 기록 완전성, 타임스탬프

**작성 팁:**
- 불릿 포인트 사용
- 한 줄에 핵심만
- 예시 코드 제거

### 2. 테스트 케이스
- 정상: 기본 흐름, 다양한 입력
- 에러: 외부 API 실패, 잘못된 입력, 환경 오류

**작성 팁:**
- 케이스명만 명시
- 상세 설명 제거
- 검증 포인트만 포함

### 3. 주의사항
- 비동기 처리
- 상태 격리
- 외부 의존성
- 비용/성능 고려사항

**작성 팁:**
- 키워드 중심
- 한 줄 요약
- 실행 시 고려사항만

### 4. 체크리스트
- 검증 항목만 나열
- [ ] 형식 사용
- 핵심 검증 포인트만

## 토큰 최적화 기법

### 제거 항목
- 장황한 설명
- 중복 내용
- 예시 코드/JSON
- 변경 이력
- 목적/범위 상세 설명
- 이모지/특수문자

### 유지 항목
- 핵심 구조
- 검증 포인트
- 체크리스트
- 원칙

### 표현 최적화
- "본 문서는..." → 제거
- "확인해야 합니다" → "확인"
- "정상적으로" → "정상"
- 문장 → 불릿 포인트

## 범용성 확보 방법

### 프로젝트 특정 내용 제거
- 프로젝트명
- 특정 API/서비스명
- 구체적인 예시 값
- 특정 기술 스택 상세

### 추상화
- "네이버 블로그" → "외부 API"
- "강남역" → "위치 정보"
- "파스타" → "검색 키워드"
- "LangGraph" → 기술명은 유지 (범용 프레임워크)

### 일반화
- 특정 노드명 → 역할 기반 명명
- 구체적 예시 → 패턴 설명
- 특정 에러 → 에러 유형

## 심도 있는 작성 방법

### 테스트 범위
- 구조: 노드/엣지/상태/엔트리/종료
- 기능: 입력/출력/처리/에러
- 분기: 조건/경로/예외
- 에러: 레벨별/상태 관리
- 로깅: 완전성/정확성

### 검증 포인트 구체화
- "정상 동작" → "입력 파싱, 상태 업데이트, 출력 생성"
- "에러 처리" → "에러 캐치, 상태 업데이트, 메시지 명확성"

### 주의사항 구체화
- 비동기: await 사용, 동시 실행
- 상태: 독립 실행, 격리
- 의존성: 모킹, 비용/시간

## 작성 체크리스트

- [ ] 프로젝트 특정 내용 제거
- [ ] 토큰 최적화 (중복/장황 제거)
- [ ] AI agent 이해 가능한 구조
- [ ] 테스트 범위 명확
- [ ] 검증 포인트 구체화
- [ ] 체크리스트 포함
- [ ] 주의사항 포함
- [ ] 실행 가능한 지시

## 작성 예시

### 개발 지시서 예시
```
# 사용자 인증 모듈 개발 지시서

## 개발 범위
- 로그인/로그아웃 기능
- 토큰 관리
- 권한 검증

## 구현 요구사항
- JWT 토큰 기반 인증
- 토큰 갱신 로직
- 권한별 접근 제어

## 인터페이스
- 입력: 사용자 정보, 인증 정보
- 출력: 토큰, 사용자 정보
- 에러: 인증 실패, 토큰 만료

## 주의사항
- 토큰 보안 저장
- 만료 시간 관리
- 동시 접근 처리

## 체크리스트
- [ ] 로그인 로직 구현
- [ ] 토큰 생성/검증 구현
- [ ] 권한 검증 구현
- [ ] 에러 처리 구현
```

### 디자인 지시서 예시
```
# 마이크로서비스 아키텍처 디자인 지시서

## 디자인 범위
- 서비스 분리
- API 게이트웨이
- 서비스 간 통신

## 설계 원칙
- 단일 책임
- 느슨한 결합
- 독립 배포

## 아키텍처
- 서비스: 사용자, 주문, 결제
- 통신: REST API, 메시지 큐
- 데이터: 서비스별 독립 DB

## 인터페이스
- API: RESTful, GraphQL
- 메시지: 이벤트 기반
- 에러: 표준 에러 응답

## 주의사항
- 서비스 간 의존성 최소화
- 데이터 일관성 고려
- 장애 격리

## 체크리스트
- [ ] 서비스 분리 설계
- [ ] API 인터페이스 정의
- [ ] 통신 방식 결정
- [ ] 데이터 모델 설계
```

### 기획 지시서 예시
```
# 주문 처리 기능 기획 지시서

## 기획 범위
- 주문 생성
- 결제 처리
- 주문 상태 관리

## 요구사항
- 실시간 주문 처리
- 결제 실패 시 롤백
- 주문 상태 추적

## 시나리오
- 정상: 주문 생성 → 결제 → 완료
- 예외: 결제 실패 → 주문 취소
- 에러: 시스템 오류 → 알림

## 데이터
- 입력: 주문 정보, 결제 정보
- 출력: 주문 번호, 상태
- 저장: 주문 내역, 상태 이력

## 주의사항
- 동시 주문 처리
- 결제 보안
- 상태 일관성

## 체크리스트
- [ ] 주문 흐름 정의
- [ ] 결제 연동 명세
- [ ] 상태 관리 로직
- [ ] 에러 처리 시나리오
```

### 테스트 오케스트레이션 문서 구조
```
# 테스트 오케스트레이션 문서

## 테스트 유형별 참고 문서
| 테스트 유형 | 참고 문서 |
|------------|----------|
| [기술명] 워크플로우 | `test_[기술명]_workflow.md` |
| 일반 API | 본 문서 기본 절차 |

## 테스트 원칙
### 파일 관리
**테스트 과정에서 생성했던 파일은 제거하고, 결과는 채팅으로만 안내.**
- 임시 파일 테스트 후 즉시 삭제
- 결과는 파일 저장 없이 채팅으로만 보고

## 테스트 절차
1. 사전 확인: 서버 상태, 환경 설정, 참고 문서 확인
2. 테스트 실행: 참고 문서에 따라 정상/에러 테스트
3. 결과 정리: 채팅으로 요약, 임시 파일 삭제
```

### 특정 테스트 가이드 구조
```
# [기술/도메인] 테스트 가이드

## 테스트 범위
### 1. 구조 검증
- 컴포넌트 등록 및 연결 확인
- 엔트리/종료 지점 확인
- 상태 정의 및 전달 확인

### 2. 기능 검증
- 각 컴포넌트의 입력/출력 처리
- 외부 API 호출 동작 확인
- 비즈니스 로직: 구조화 출력, 에러 처리, 추적

### 3. 조건부 분기
- 조건 함수 정확성
- 분기 경로 정상 동작
- 예외 상황 분기 처리

### 4. 에러 처리
- 컴포넌트 레벨: 에러 처리, 상태 업데이트, 메시지 명확성
- 전체 레벨: 예외 처리, 부분 실패 상태 관리

### 5. 로깅
- 기록 완전성 (입력/출력/상태/메시지)
- 타임스탬프 정확성

## 테스트 케이스
### 정상
- 모든 컴포넌트 순차 실행
- 상태 전달 정상
- 최종 응답 완전성

### 에러
- 외부 의존성 실패 처리
- 잘못된 입력 검증
- 환경 설정 오류

## 주의사항
- 비동기 처리: await 사용, 동시 실행 고려
- 상태 격리: 각 테스트 독립 실행
- 외부 의존성: 모킹 고려, 비용/시간 고려
- 추적: 사용량/비용 정확성

## 체크리스트
- [ ] 구조 구성 정확
- [ ] 모든 컴포넌트 정상 실행
- [ ] 상태 전달 정상
- [ ] 조건부 분기 정확
- [ ] 에러 처리 적절
- [ ] 로깅 완전
- [ ] 최종 응답 완전
- [ ] 비동기 처리 정상
```

## 지시서 유형별 특화 가이드

### 개발 지시서
- 기능 명세: 입력/출력/처리 로직
- 인터페이스: API 스펙, 데이터 형식
- 구현: 핵심 로직, 에러 처리, 검증
- 성능: 요구사항, 최적화 포인트

### 디자인 지시서
- 구조: 컴포넌트, 모듈, 계층
- 인터페이스: API, 데이터 모델
- 아키텍처: 패턴, 의존성, 데이터 흐름
- 원칙: 확장성, 유지보수성, 성능

### 기획 지시서
- 기능: 명세, 요구사항, 우선순위
- 시나리오: 정상/예외/에러 흐름
- 데이터: 입력/출력/저장, 검증
- 비즈니스: 로직, 규칙, 제약사항

### 테스트 지시서
- 범위: 구조/기능/에러/로깅
- 케이스: 정상/에러
- 검증: 포인트, 체크리스트
- 주의: 비동기, 상태, 의존성

## 기술별 적용 예시

### 워크플로우 엔진 (LangGraph, Temporal 등)
- 구조: 노드/태스크, 엣지/워크플로우, 상태
- 기능: 노드/태스크별 입력/출력
- 분기: 조건부 엣지/분기
- 에러: 노드/태스크 레벨, 워크플로우 레벨
- 로깅: 스텝/이벤트 기록

### REST API
- 구조: 엔드포인트, 라우팅, 미들웨어
- 기능: 요청/응답 처리, 검증
- 분기: 라우팅 분기
- 에러: 핸들러별, 전역
- 로깅: 요청/응답 로깅

### 마이크로서비스
- 구조: 서비스, 인터페이스, 의존성
- 기능: 서비스별 기능
- 분기: 서비스 라우팅
- 에러: 서비스 레벨, 분산 추적
- 로깅: 분산 로깅

## 검증 포인트 작성 가이드

### 개발 지시서 검증 포인트
- 기능: 명세 완전성, 로직 정확성
- 인터페이스: 스펙 명확성, 호환성
- 구현: 에러 처리, 검증 로직
- 성능: 요구사항 충족, 최적화

### 디자인 지시서 검증 포인트
- 구조: 설계 완전성, 모듈화
- 인터페이스: 정의 명확성, 일관성
- 아키텍처: 확장성, 유지보수성
- 원칙: 준수 여부, 트레이드오프

### 기획 지시서 검증 포인트
- 기능: 명세 완전성, 요구사항 명확성
- 시나리오: 흐름 완전성, 예외 처리
- 데이터: 요구사항 명확성, 검증 규칙
- 비즈니스: 로직 명확성, 우선순위

### 테스트 지시서 검증 포인트
- 구조 검증
- 등록: 컴포넌트가 시스템에 등록되었는가
- 연결: 컴포넌트 간 연결이 올바른가
- 엔트리: 시작 지점이 명확한가
- 종료: 종료 지점이 올바른가
- 상태: 상태 정의가 완전한가

### 기능 검증
- 입력: 입력 파싱/검증이 정상인가
- 처리: 핵심 로직이 정상인가
- 출력: 출력 형식이 올바른가
- 외부: 외부 API 호출이 정상인가
- 특수: 구조화 출력, 에러 처리, 추적이 정상인가

### 에러 처리
- 캐치: 에러가 적절히 캐치되는가
- 상태: 에러 시 상태가 올바르게 업데이트되는가
- 메시지: 에러 메시지가 명확한가
- 복구: 복구 로직이 있는가
- 전파: 에러 전파가 적절한가

## 지시서 유형별 작성 팁

### 개발 지시서
- 구현 가능한 구체적 명세
- 인터페이스 명확히 정의
- 에러 케이스 포함
- 성능 요구사항 구체화

### 디자인 지시서
- 구조를 명확히 표현
- 의존성 관계 명시
- 확장 포인트 식별
- 트레이드오프 고려

### 기획 지시서
- 사용자 관점 시나리오
- 비즈니스 로직 명확화
- 우선순위 명시
- 제약사항 포함

### 테스트 지시서
- 검증 가능한 포인트
- 실행 가능한 케이스
- 체크리스트 제공
- 주의사항 구체화

## 작성 시 피해야 할 항목

### 프로젝트 특정
- 프로젝트명
- 특정 서비스/API명
- 구체적인 예시 값
- 특정 환경 설정

### 토큰 낭비
- 장황한 설명
- 중복 내용
- 예시 코드
- 변경 이력
- 목적/배경 상세
- 이모지/특수문자

### 모호성
- "적절히", "올바르게" 등 모호한 표현 (구체화 필요)
- "등"으로 끝나는 불완전한 목록
- 조건 없는 일반론

## 최종 검토 체크리스트

### 공통
- [ ] 프로젝트 특정 내용 완전 제거
- [ ] 모든 섹션이 핵심만 포함
- [ ] 불필요한 설명 제거
- [ ] AI agent가 실행 가능한 지시
- [ ] 다른 프로젝트에 적용 가능

### 개발 지시서
- [ ] 기능 명세 구체적
- [ ] 인터페이스 명확
- [ ] 에러 처리 포함
- [ ] 성능 요구사항 명시

### 디자인 지시서
- [ ] 구조 명확
- [ ] 의존성 명시
- [ ] 확장성 고려
- [ ] 원칙 준수

### 기획 지시서
- [ ] 시나리오 완전
- [ ] 비즈니스 로직 명확
- [ ] 우선순위 명시
- [ ] 제약사항 포함

### 테스트 지시서
- [ ] 검증 포인트 구체화
- [ ] 체크리스트 완전
- [ ] 주의사항 포함
- [ ] 실행 가능한 케이스

